[gd_scene load_steps=32 format=3 uid="uid://fup8cbio80ln"]

[ext_resource type="Script" path="res://map/Map.gd" id="1_l8pm7"]
[ext_resource type="Material" uid="uid://bgy0pukxb4bkd" path="res://material/terrain.tres" id="1_tjimc"]
[ext_resource type="Environment" uid="uid://c34dco8b4sy14" path="res://map/map_env.tres" id="2_pqq2f"]
[ext_resource type="Script" path="res://map/Paths.gd" id="3_wean6"]
[ext_resource type="Script" path="res://map/Segment.gd" id="4_qcdc7"]
[ext_resource type="Script" path="res://map/PlatformSegment.gd" id="4_y0m4m"]
[ext_resource type="Script" path="res://map/EntranceSegment.gd" id="6_pif3w"]
[ext_resource type="PackedScene" uid="uid://criq6ra7mgwb0" path="res://map/TrackSemaphore.tscn" id="7_e05qc"]
[ext_resource type="PackedScene" uid="uid://cx1548b6366u6" path="res://map/railyard.tscn" id="8_mh0s5"]
[ext_resource type="PackedScene" uid="uid://dhs5mli64px4h" path="res://assets/StationPlatform_InnerCity.gltf" id="9_yrns1"]
[ext_resource type="Material" uid="uid://hcj7uj45da68" path="res://material/platform.tres" id="10_hnk1m"]
[ext_resource type="PackedScene" uid="uid://df1plcki2tkem" path="res://assets/StationPlatform_InterCity1.gltf" id="11_iwfwl"]
[ext_resource type="PackedScene" uid="uid://npxp5m71wjmb" path="res://assets/StationPlatform_InterCity2.gltf" id="12_mx2oh"]
[ext_resource type="PackedScene" uid="uid://cbrmqwdpbmp8c" path="res://assets/StationPlatform_InterCity3.gltf" id="13_wki2p"]
[ext_resource type="PackedScene" uid="uid://bqefjy7cia431" path="res://assets/StationPlatform_InterCity4.gltf" id="14_7lgnk"]
[ext_resource type="PackedScene" uid="uid://eurfk3bvs2ni" path="res://building/station_building.tscn" id="15_ppmh8"]
[ext_resource type="PackedScene" uid="uid://dqaiukuhra8l6" path="res://building/platform_overpass.tscn" id="16_3h60n"]
[ext_resource type="PackedScene" path="res://building/info_booth.tscn" id="17_grupa"]
[ext_resource type="PackedScene" uid="uid://coa05l0i3ekkd" path="res://building/platform_display.tscn" id="18_scvjy"]
[ext_resource type="PackedScene" uid="uid://dhvlywyoewsmd" path="res://building/house 1.tscn" id="19_dlnn2"]
[ext_resource type="Material" uid="uid://3h0ofrxlqqo8" path="res://material/street.tres" id="20_tfert"]

[sub_resource type="PlaneMesh" id="PlaneMesh_2tmmf"]
material = ExtResource("1_tjimc")
size = Vector2(2000, 2000)

[sub_resource type="Curve3D" id="Curve3D_csmb7"]
_data = {
"points": PackedVector3Array(-36, 0, -15, 36, 0, 15, -95, 0, -133, -48, 0, -20, 48, 0, 20, 126, 0, -41),
"tilts": PackedFloat32Array(0, 0)
}
point_count = 2

[sub_resource type="Curve3D" id="Curve3D_6fj3b"]
_data = {
"points": PackedVector3Array(-36, 0, -15, 36, 0, 15, -101, 0, -118, -48, 0, -20, 48, 0, 20, 119, 0, -27),
"tilts": PackedFloat32Array(0, 0)
}
point_count = 2

[sub_resource type="Curve3D" id="Curve3D_0src8"]
_data = {
"points": PackedVector3Array(-39, 0, -17, 39, 0, 17, 126, 0, -41, -49, 0, -17.6, 49, 0, 17.6, 245, 0, 37),
"tilts": PackedFloat32Array(0, 0)
}
point_count = 2

[sub_resource type="Curve3D" id="Curve3D_se8xa"]
_data = {
"points": PackedVector3Array(-39, 0, -17, 39, 0, 17, 119, 0, -27, -49, 0, -17, 49, 0, 17, 245, 0, 37),
"tilts": PackedFloat32Array(0, 0)
}
point_count = 2

[sub_resource type="Curve3D" id="Curve3D_u881t"]
_data = {
"points": PackedVector3Array(-44, 0, -15, 44, 0, 15, 245, 0, 37, -31, 0, 7, 31, 0, -7, 370, 0, 39),
"tilts": PackedFloat32Array(0, 0)
}
point_count = 2

[sub_resource type="Curve3D" id="Curve3D_jduch"]
_data = {
"points": PackedVector3Array(-46.7, 0, 9.7, 46.7, 0, -9.7, 370, 0, 39, -43.4, 0, -0.8, 43.4, 0, 0.8, 472.966, 0, 31.002),
"tilts": PackedFloat32Array(0, 0)
}
point_count = 2

[sub_resource type="BoxMesh" id="BoxMesh_diuf4"]
material = ExtResource("20_tfert")
size = Vector3(200, 8, 200)

[sub_resource type="BoxMesh" id="BoxMesh_a0fvm"]
material = ExtResource("20_tfert")
size = Vector3(180, 8, 180)

[sub_resource type="FogMaterial" id="FogMaterial_8ytg3"]
density = 0.5
albedo = Color(0, 0, 0, 1)
edge_fade = 0.585634

[node name="Map" type="Node3D"]
script = ExtResource("1_l8pm7")

[node name="Camera3d" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.707107, 0.707107, 0, -0.707107, 0.707107, 300, 128, 180)
current = true
fov = 70.0
near = 0.5
far = 5000.0

[node name="DirectionalLight3d" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.707107, 0.653282, -0.270598, 0, 0.382683, 0.92388, 0.707107, -0.653282, 0.270598, 0, 153, 0)
light_color = Color(1, 0.97, 0.88, 1)
light_energy = 1.25
shadow_enabled = true
directional_shadow_blend_splits = true
directional_shadow_fade_start = 0.7
directional_shadow_max_distance = 400.0

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = ExtResource("2_pqq2f")

[node name="MeshInstance3d" type="MeshInstance3D" parent="."]
mesh = SubResource("PlaneMesh_2tmmf")

[node name="Paths" type="Node3D" parent="."]
visible = false
script = ExtResource("3_wean6")

[node name="PlatformSegment" type="Path3D" parent="Paths"]
curve = SubResource("Curve3D_csmb7")
script = ExtResource("4_y0m4m")
allowed_entrances = [NodePath("../EntranceSegment")]

[node name="PlatformSegment2" type="Path3D" parent="Paths"]
curve = SubResource("Curve3D_6fj3b")
script = ExtResource("4_y0m4m")
allowed_entrances = [NodePath("../EntranceSegment")]
crossing_segments = []

[node name="Segment" type="Path3D" parent="Paths"]
curve = SubResource("Curve3D_0src8")
script = ExtResource("4_qcdc7")

[node name="Segment3" type="Path3D" parent="Paths"]
curve = SubResource("Curve3D_se8xa")
script = ExtResource("4_qcdc7")

[node name="Segment2" type="Path3D" parent="Paths"]
curve = SubResource("Curve3D_u881t")
script = ExtResource("4_qcdc7")

[node name="EntranceSegment" type="Path3D" parent="Paths"]
curve = SubResource("Curve3D_jduch")
script = ExtResource("6_pif3w")
begin_semaphore = NodePath("TrackSemaphore")

[node name="TrackSemaphore" parent="Paths/EntranceSegment" instance=ExtResource("7_e05qc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 373, 0, 33)

[node name="TrackLayout" type="Node3D" parent="."]

[node name="Railyard" parent="TrackLayout" instance=ExtResource("8_mh0s5")]

[node name="StationStructures" type="Node3D" parent="."]

[node name="StationPlatform_InnerCity" parent="StationStructures" instance=ExtResource("9_yrns1")]

[node name="InnerCityPlatform" parent="StationStructures/StationPlatform_InnerCity" index="0"]
surface_material_override/0 = ExtResource("10_hnk1m")

[node name="StationPlatform_InterCity1" parent="StationStructures" instance=ExtResource("11_iwfwl")]

[node name="IntercityPlatform1" parent="StationStructures/StationPlatform_InterCity1" index="0"]
surface_material_override/0 = ExtResource("10_hnk1m")

[node name="StationPlatform_InterCity2" parent="StationStructures" instance=ExtResource("12_mx2oh")]

[node name="INtercityPlatform2" parent="StationStructures/StationPlatform_InterCity2" index="0"]
surface_material_override/0 = ExtResource("10_hnk1m")

[node name="StationPlatform_InterCity3" parent="StationStructures" instance=ExtResource("13_wki2p")]

[node name="INtercityPlatform3" parent="StationStructures/StationPlatform_InterCity3" index="0"]
surface_material_override/0 = ExtResource("10_hnk1m")

[node name="StationPlatform_InterCity4" parent="StationStructures" instance=ExtResource("14_7lgnk")]

[node name="IntercityPlatform4" parent="StationStructures/StationPlatform_InterCity4" index="0"]
surface_material_override/0 = ExtResource("10_hnk1m")

[node name="StationBuilding" parent="StationStructures" instance=ExtResource("15_ppmh8")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 10.4, -84.3)

[node name="PlatformOverpass" parent="StationStructures" instance=ExtResource("16_3h60n")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -52, 0.4, 3.5)

[node name="PlatformOverpass2" parent="StationStructures" instance=ExtResource("16_3h60n")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 52, 0.4, 3.5)

[node name="InfoBooth" parent="StationStructures" instance=ExtResource("17_grupa")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.4, -18)

[node name="InfoBooth3" parent="StationStructures" instance=ExtResource("17_grupa")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.4, 19)

[node name="InfoBooth2" parent="StationStructures" instance=ExtResource("17_grupa")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.4, 55)

[node name="platform_display" parent="StationStructures" instance=ExtResource("18_scvjy")]
transform = Transform3D(1.35, 0, 0, 0, 1.35, 0, 0, 0, 1.35, -26, 1, 0)

[node name="platform_display2" parent="StationStructures" instance=ExtResource("18_scvjy")]
transform = Transform3D(1.35, 0, 0, 0, 1.35, 0, 0, 0, 1.35, 26, 1, 0)

[node name="platform_display3" parent="StationStructures" instance=ExtResource("18_scvjy")]
transform = Transform3D(1.35, 0, 0, 0, 1.35, 0, 0, 0, 1.35, -26, 1, -18)

[node name="platform_display4" parent="StationStructures" instance=ExtResource("18_scvjy")]
transform = Transform3D(1.35, 0, 0, 0, 1.35, 0, 0, 0, 1.35, 26, 1, -18)

[node name="platform_display5" parent="StationStructures" instance=ExtResource("18_scvjy")]
transform = Transform3D(1.35, 0, 0, 0, 1.35, 0, 0, 0, 1.35, -26, 1, 19)

[node name="platform_display6" parent="StationStructures" instance=ExtResource("18_scvjy")]
transform = Transform3D(1.35, 0, 0, 0, 1.35, 0, 0, 0, 1.35, 26, 1, 19)

[node name="platform_display7" parent="StationStructures" instance=ExtResource("18_scvjy")]
transform = Transform3D(1.35, 0, 0, 0, 1.35, 0, 0, 0, 1.35, -26, 1, 55)

[node name="platform_display8" parent="StationStructures" instance=ExtResource("18_scvjy")]
transform = Transform3D(1.35, 0, 0, 0, 1.35, 0, 0, 0, 1.35, 26, 1, 55)

[node name="platform_display11" parent="StationStructures" instance=ExtResource("18_scvjy")]
transform = Transform3D(1.35, 0, 0, 0, 1.35, 0, 0, 0, 1.35, 78, 1, 0)

[node name="platform_display12" parent="StationStructures" instance=ExtResource("18_scvjy")]
transform = Transform3D(1.35, 0, 0, 0, 1.35, 0, 0, 0, 1.35, 78, 1, -18)

[node name="platform_display13" parent="StationStructures" instance=ExtResource("18_scvjy")]
transform = Transform3D(1.35, 0, 0, 0, 1.35, 0, 0, 0, 1.35, 78, 1, 19)

[node name="platform_display14" parent="StationStructures" instance=ExtResource("18_scvjy")]
transform = Transform3D(1.35, 0, 0, 0, 1.35, 0, 0, 0, 1.35, 78, 1, 55)

[node name="platform_display15" parent="StationStructures" instance=ExtResource("18_scvjy")]
transform = Transform3D(1.35, 0, 0, 0, 1.35, 0, 0, 0, 1.35, -78, 1, 0)

[node name="platform_display16" parent="StationStructures" instance=ExtResource("18_scvjy")]
transform = Transform3D(1.35, 0, 0, 0, 1.35, 0, 0, 0, 1.35, -78, 1, -18)

[node name="platform_display17" parent="StationStructures" instance=ExtResource("18_scvjy")]
transform = Transform3D(1.35, 0, 0, 0, 1.35, 0, 0, 0, 1.35, -78, 1, 19)

[node name="platform_display18" parent="StationStructures" instance=ExtResource("18_scvjy")]
transform = Transform3D(1.35, 0, 0, 0, 1.35, 0, 0, 0, 1.35, -78, 1, 55)

[node name="platform_display9" parent="StationStructures" instance=ExtResource("18_scvjy")]
transform = Transform3D(1.35, 0, 0, 0, 1.35, 0, 0, 0, 1.35, -26, 1, -38)

[node name="platform_display10" parent="StationStructures" instance=ExtResource("18_scvjy")]
transform = Transform3D(1.35, 0, 0, 0, 1.35, 0, 0, 0, 1.35, 26, 1, -38)

[node name="Backdrop" type="Node3D" parent="."]

[node name="house 1" parent="Backdrop" instance=ExtResource("19_dlnn2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -106, 5.5, -65)

[node name="house 2" parent="Backdrop" instance=ExtResource("19_dlnn2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -164.6, 5.5, -65)

[node name="house 3" parent="Backdrop" instance=ExtResource("19_dlnn2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.600006, 5.5, -161)

[node name="house 4" parent="Backdrop" instance=ExtResource("19_dlnn2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.600006, 5.5, 86)

[node name="house 5" parent="Backdrop" instance=ExtResource("19_dlnn2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -92.6, 5.5, 86)

[node name="house 6" parent="Backdrop" instance=ExtResource("19_dlnn2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 91.4, 5.5, 86)

[node name="Terrain" type="MeshInstance3D" parent="Backdrop"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -170, 1.5, -155)
mesh = SubResource("BoxMesh_diuf4")

[node name="Terrain10" type="MeshInstance3D" parent="Backdrop"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -11, 1.5, 179)
mesh = SubResource("BoxMesh_diuf4")

[node name="Terrain6" type="MeshInstance3D" parent="Backdrop"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, -214)
mesh = SubResource("BoxMesh_diuf4")

[node name="Terrain7" type="MeshInstance3D" parent="Backdrop"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -107, 1.5, -324)
mesh = SubResource("BoxMesh_diuf4")

[node name="Terrain8" type="MeshInstance3D" parent="Backdrop"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -69, 1.5, -317)
mesh = SubResource("BoxMesh_diuf4")

[node name="Terrain9" type="MeshInstance3D" parent="Backdrop"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 91, 1.5, -324)
mesh = SubResource("BoxMesh_diuf4")

[node name="Terrain4" type="MeshInstance3D" parent="Backdrop"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 160, 1.5, -145)
mesh = SubResource("BoxMesh_a0fvm")

[node name="Terrain5" type="MeshInstance3D" parent="Backdrop"]
transform = Transform3D(0.737277, 0, 0.67559, 0, 1, 0, -0.67559, 0, 0.737277, 255.5, 1.5, -182.1)
mesh = SubResource("BoxMesh_a0fvm")

[node name="Terrain2" type="MeshInstance3D" parent="Backdrop"]
transform = Transform3D(0.991445, 0, 0.130526, 0, 1, 0, -0.130526, 0, 0.991445, -356, 1.5, -143)
mesh = SubResource("BoxMesh_diuf4")

[node name="Terrain3" type="MeshInstance3D" parent="Backdrop"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -541.6, 1.5, -130.9)
mesh = SubResource("BoxMesh_diuf4")

[node name="FogVolume" type="FogVolume" parent="Backdrop"]
transform = Transform3D(0.793353, 0, -0.608761, 0, 1, 0, 0.608761, 0, 0.793353, 580, 3.6, 243.9)
extents = Vector3(18, 4, 18)
material = SubResource("FogMaterial_8ytg3")

[node name="FogVolume2" type="FogVolume" parent="Backdrop"]
transform = Transform3D(-0.92388, 0, -0.382683, 0, 1, 0, 0.382683, 0, -0.92388, -605, 3.6, 156.9)
extents = Vector3(18, 4, 18)
material = SubResource("FogMaterial_8ytg3")

[node name="FogVolume3" type="FogVolume" parent="Backdrop"]
transform = Transform3D(-1, 0, 8.9407e-08, 0, 1, 0, -8.9407e-08, 0, -1, -505, 3.6, -22.1)
extents = Vector3(18, 4, 6)
material = SubResource("FogMaterial_8ytg3")

[node name="FogVolume4" type="FogVolume" parent="Backdrop"]
transform = Transform3D(0.573576, 0, 0.819152, 0, 1, 0, -0.819152, 0, 0.573576, 400, 3.6, -181.1)
extents = Vector3(18, 4, 6)
material = SubResource("FogMaterial_8ytg3")

[node name="FogVolume5" type="FogVolume" parent="Backdrop"]
transform = Transform3D(0.953717, 0, 0.300706, 0, 1, 0, -0.300706, 0, 0.953717, 446, 3.6, -51.1)
extents = Vector3(18, 4, 6)
material = SubResource("FogMaterial_8ytg3")

[node name="FogVolume6" type="FogVolume" parent="Backdrop"]
transform = Transform3D(0.991445, 0, 0.130526, 0, 1, 0, -0.130526, 0, 0.991445, 551, 3.6, 1.89999)
extents = Vector3(18, 4, 6)
material = SubResource("FogMaterial_8ytg3")

[editable path="StationStructures/StationPlatform_InnerCity"]
[editable path="StationStructures/StationPlatform_InterCity1"]
[editable path="StationStructures/StationPlatform_InterCity2"]
[editable path="StationStructures/StationPlatform_InterCity3"]
[editable path="StationStructures/StationPlatform_InterCity4"]
